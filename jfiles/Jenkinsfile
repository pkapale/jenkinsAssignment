pipeline {
    agent none

    stages {
        stage('Print Environment') {
            agent {
                node {
                    label 'Development'
                }
            }
            steps {
                script {
                    echo "Branch Name: ${env.BRANCH_NAME}"
                    echo "Build Result: ${currentBuild.result}"
                    echo "Custom Workspace: ${env.WORKSPACE}"
                }
            }
        }

        stage('Test') {
            agent {
                node {
                    label 'Development'
                }
            }
            when {
                expression { true }
            }
            steps {
                script {
                    echo "Triggering test job..."
                    sh "ls -ltr"
                    sh "cat update1"
                    build job: 'test'
                }
            }
        }

        stage('Deploy to Prod') {
            agent {
                node {
                    label 'Production'
                }
            }
            when {
                expression { true }
            }
            steps {
                script {
                    echo "Copying files to prod node..."
                    sh "ls -ltr"
                    sh "cat update1"
                    // Add your deployment steps here
                }
            }
        }
    }

    post {
        success {
            echo "Pipeline completed successfully!"
        }
    }
}
